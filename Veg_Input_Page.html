<!DOCTYPE html>
<html lang="EN" dir="ltr" xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <title>
            I B I S - Vegetable Input Form
        </title>
        <script type="text/javascript" src="jquery-1.11.3.js"> </script>
	<script type="text/javascript" src="http://127.0.0.1/ibis/fileselect.js"></script>
	
	<script type="text/javascript">
		$(document).ready(function(){
	 	 	$('#mediaPic').change(handleFileSelect);	
	 		
	 	})

	</script>

            <link rel="stylesheet"
              type="text/css"
              href="./VegInput.css"
             >
        
    </head>
    <body name="VegInputBody" >
      <div id="allContainer">
       
        <div name="Heading">
	        <img id="logo_image" src="./images/Logo1_fullsizetransp.png">
            <p id="headingText">Vegetable Input Form</p>
        </div>
        <div id="pgButtons" class="littleDD">
        	<input type="button" value="Submit Data" class="buttonclass littleDD" onclick="doSubmit()">   
         <a href="IBIS_main2.html" class="buttonclass littleDD"><img src="" alt="">Back to Main Screen</a>
        </div>
        
        <div id="detail_fs_min" class="littleDD" ">
          <div id="headinglist" class="littleDD">
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Phylum</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">subPhylum</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Class</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">subClass</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Order</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Family</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Genus</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Species</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Common_Names</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Name_Notes</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Description</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Ecology</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Distrib_Notes</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Uses</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Category</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Status</label></p>
            <p><label class="thisareaLabel littleDD" onclick="loadcontent(this)">Growing</label></p>
          </div> 
          <div id="outputBlock" class="bigDD outputblock">
            <p id="inputHeading">Enter Information</p>
            <textarea id="outputBox" class="littleDD outputbox"></textarea><br>
            <a id="sendeditButton" class="buttonclass littleDD" onclick="sendedit()">Send</a>
        	</div>  
        	
        <form  name="VegForm" action="../../cgi-bin/IBISCollectVegData.php3" method="POST" enctype="multipart/form-data" class="">
	  			<fieldset id="dataForm" class="hiddentext">
				    <input type="text" name="Akingdom" value="Plantae" class="hiddentext">
				    <input type="text" id="Phylum" name="phylum" class="hiddentext">
				    <input type="text" id="subPhylum" name="subPhylum" class="hiddentext">
				    <input type="text" id="Class" name="class" class="hiddentext">
				    <input type="text" id="subClass" name="subClass" class="hiddentext">
						<input type="text" id="Order" name="order" class="hiddentext">
						<input type="text" id="Family" name="family" class="hiddentext">
						<input type="text" id="Genus" name="genus" class="hiddentext">
						<input type="text" id="Species" name="species" class="hiddentext">
						<input type="text" id="Common_Names" name="common_Names" class="hiddentext">
						<textarea id="Name_Notes" name="name_Notes" class="hiddentext"></textarea>
						<textarea id="Description" name="description" class="hiddentext"></textarea>
						<textarea id="Ecology" name="ecology" class="hiddentext"></textarea>
						<textarea id="Distrib_Notes" name="distrib_Notes" class="hiddentext"></textarea>
						<textarea id="Uses" name="uses" class="hiddentext"></textarea>
						<textarea id="Status" name="status" class="hiddentext"></textarea>
						<textarea id="Category" name="category" class="hiddentext"></textarea>
						<textarea id="Growing" name="growing" class="hiddentext"></textarea>
						<textarea id="Image_Tags" name = "img_Tags" class="hiddentext"></textarea>
						<input type="text" name="acclvl" id="acclevel" class="hiddentext" value="">
						<input type="text" name="contributer_ID" id="contrib_ID" class="hiddentext" value="">
						
						<div id="images" class="littleDD">
          		<p class="labelclass">Add Media</p>
	      			<input type="file" name="media[]" id="mediaPic" class="littleDD" multiple />
	      		</div>
	      		
	      		<div id="tagslist"></div><div id="imgDisplay" class="littleDD"></div>
	      		<div id="optionsDsplay" class="littleDD" style="display : none;"></div> 
	      		
  		</div>   
	      		
           </div>
	  			</fieldset>
	 			
	 			</form>
	 			
			
    </div>
        
        <script type="text/javascript">
        var imgname = "";
        var theHeading = "";
	  		var theLabel ="";
	  		checkStorage();
	 
        function addTag(){
    	    var tagslist = $('#mediatagsinput').val();
   	     var newtag = imgname +" : "+ tagslist;
    	    var listitem = "<input type=\"text\"name=\"imgtag[]\" class=\"listitemC littleDD\" value=\""+newtag+"\" ></input><br />";
     	   $('#tagslist').append(listitem);
        }
        
        function showOps(that){
		   	  imgname = that.title;
		   	  $("#optionsDsplay").slideDown('fast');
		   	  var opttext = '<p class="labelclass">Add Media Tags for <br>' + imgname + '</p><input type="text" name="mediaTagsInput" id="mediatagsinput" class="littleDD inputclass" /\><br><input type="button" class="buttonclass" value="Add" onclick="addTag();" />';
		  		$('#optionsDsplay').html(opttext);
     		}
        
	function checkStorage(){
	  if (sessionStorage.userRef){
	    var theRef = sessionStorage.userRef;
	    theRefer = theRef.split(" : "); 
	  	$("#contrib_ID").val(theRefer[1]);
	  	
	  }else {
	    alert("You should really not be on this page!")
	    document.location = "IBIS_main2.html";
	    }
	  }


	  function sendedit(){
	  var editval = $("#outputBox").val();
        $('#'+theHeading).val(editval);
        theLabel.style.backgroundColor = "pink";
        $("#outputBox").val("");
     }
     
    function loadcontent(that){
        theHeading = $(that).text();
        theLabel = that;
        $('.thisareaLabel').css("color" ,"black");
        theLabel.style.color = "lightgreen";
        //theLabel.color = "red";
        var theContent = $('#'+theHeading).val();
        $("#outputBox").val(theContent);
     }
        function checkPics() {
          		var picValue = $('#imgDisplay').html();
          		return picValue;
        }
        
	function doSubmit(){
	var apicValue = checkPics();
	 if (apicValue == ""){
	 alert("dude you must add at least one picture... and dont forget the tag");
	 exit;
	 }
		//cleanupData();
		document.VegForm.submit();
	}
  
  
      </script>
    </body>
</html>
